@import 'tailwindcss';

/* =====================================
   POWERME DESIGN SYSTEM
   Tailwind 4
   ===================================== */

/* ===== FONTS ===== */
@import '@fontsource/roboto/400.css';
@import '@fontsource/roboto/500.css';
@import '@fontsource/roboto/600.css';
@import '@fontsource/roboto/700.css';
@import '@fontsource/roboto/800.css';
@import '@fontsource/roboto/900.css';
@import '@fontsource/nunito/300.css';
@import '@fontsource/nunito/400.css';
@import '@fontsource/nunito/500.css';
@import '@fontsource/nunito/600.css';
@import '@fontsource/nunito/700.css';
@import '@fontsource/nunito/800.css';

@theme {
  /* ===== Couleurs principales ===== */
  --color-blue-50: #e7f3ff;
  --color-blue-100: #d3e9ff;
  --color-blue-200: #b0d5ff;
  --color-blue-300: #81b7ff;
  --color-blue-400: #4f89ff;
  --color-blue-500: #0027ff;
  --color-blue-600: #0429ff;
  --color-blue-700: #0027ff;
  --color-blue-800: #001dc2;
  --color-blue-900: #0b25a4;
  --color-blue-950: #07155f;

  --color-mint-50: #eefff6;
  --color-mint-100: #d7ffec;
  --color-mint-200: #b2ffdb;
  --color-mint-300: #85ffc7;
  --color-mint-400: #33f59d;
  --color-mint-500: #09de7d;
  --color-mint-600: #01b865;
  --color-mint-700: #059052;
  --color-mint-800: #0a7143;
  --color-mint-900: #0a5d3a;

  --color-star: #ffcd29;

  --color-neutral-dark: #272727;
  --color-neutral-grey1: #6d6d6d;
  --color-neutral-grey2: #888888;
  --color-neutral-grey3: #b0b0b0;
  --color-neutral-grey4: #d1d1d1;
  --color-neutral-grey5: #e7e7e7;
  --color-neutral-white: #ffffff;

  --color-alert-success: #43b75d;
  --color-alert-success-light: #ecf8ef;
  --color-alert-warning: #ffaa00;
  --color-alert-warning-light: #fff7e6;
  --color-alert-error: #ee443f;
  --color-alert-error-light: #fdecec;
  --color-alert-info: #0095ff;
  --color-alert-info-light: #e7f4ff;

  /* ===== Ombres ===== */
  --shadow-card: 0 0 5px 0 rgba(39, 39, 39, 0.32), 0 4px 4px 0 rgba(0, 0, 0, 0.25);
  --shadow-sm: 0 2px 2px 0 rgba(39, 39, 39, 0.06), 0 0 1px 0 rgba(39, 39, 39, 0.08);

  /* ===== Typo ===== */
  --font-title: 'Roboto', system-ui, sans-serif;
  --font-body: 'Nunito', system-ui, sans-serif;

  --text-display-size: 60px;
  --text-display-lh: 72px;
  --text-h1-size: 48px;
  --text-h1-lh: 64px;
  --text-h2-size: 40px;
  --text-h2-lh: 48px;
  --text-h3-size: 32px;
  --text-h3-lh: 40px;
  --text-h4-size: 28px;
  --text-h4-lh: 36px;
  --text-body1-size: 22px;
  --text-body1-lh: 28px;
  --text-body2-size: 18px;
  --text-body2-lh: 24px;

  /* ===== Radius ===== */
  --radius-card: 1.25rem;
  --radius-button: 0.5rem;
  --radius-pill: 9999px;

  /* ===== Gradient ===== */
  --gradient-brand: linear-gradient(337.586deg, #85ffc7cc 0%, #001dc2ff 100%);
  --gradient-hero: linear-gradient(90deg, rgba(0, 29, 194, 0.5) 0%, rgba(133, 255, 199, 0.4) 100%);
}

/* ===== THÈME CLAIR / SOMBRE ===== */
:root {
  color-scheme: light;
  --bg: var(--color-neutral-white);
  --fg: var(--color-neutral-dark);
  --primary: var(--color-blue-800);
  --secondary: var(--color-mint-300);
  --bg-primary: var(--bg);
  --bg-secondary: color-mix(in oklab, var(--fg) 6%, var(--bg));
  --border-width: 1px;
  --border-color: color-mix(in oklab, var(--fg) 12%, transparent);
  --container-width: 1280px;
  --header-height: 96px;
  --sidebar-width: 280px;
  --spacing-xs: 0.25rem;
  --spacing-sm: 0.5rem;
  --spacing-md: 0.75rem;
  --spacing-lg: 1rem;
  --spacing-xl: 1.25rem;
  --success: var(--color-alert-success);
  --success-light: var(--color-alert-success-light);
  --warning: var(--color-alert-warning);
  --warning-light: var(--color-alert-warning-light);
  --danger: var(--color-alert-error);
  --danger-light: var(--color-alert-error-light);
  --info: var(--color-alert-info);
  --info-light: var(--color-alert-info-light);
  --transition-normal: 0.2s ease;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;
  --color-primary-rgb: 0, 29, 194;
}

:root[data-theme='dark'],
:root.dark {
  color-scheme: dark;
  --bg: #110f38;
  --fg: var(--color-neutral-white);
  --primary: var(--color-blue-600);
  --secondary: var(--color-mint-500);
}

/* ===== BASE STYLES ===== */
@layer base {
  html {
    @apply antialiased scroll-smooth;
  }

  html,
  body {
    @apply h-full;
    background: var(--bg);
    color: var(--fg);
    font-family: var(--font-body);
    font-size: 16px;
    line-height: 1.5;
  }

  .display-hero {
    font-family: var(--font-title);
    font-size: var(--text-display-size);
    line-height: var(--text-display-lh);
    @apply font-bold;
  }

  .subtitle {
    font-family: var(--font-title);
    font-weight: 400;
    font-size: var(--text-h4-size);
    line-height: var(--text-h3-lh);
  }

  h1 {
    font-family: var(--font-title);
    font-size: var(--text-h1-size);
    line-height: var(--text-h1-lh);
    @apply font-bold;
  }

  h2 {
    font-family: var(--font-title);
    font-size: var(--text-h2-size);
    line-height: var(--text-h2-lh);
    @apply font-semibold;
  }

  h3 {
    font-family: var(--font-title);
    font-size: var(--text-h3-size);
    line-height: var(--text-h3-lh);
    @apply font-medium;
  }

  h4 {
    font-family: var(--font-title);
    font-size: var(--text-h4-size);
    line-height: var(--text-h4-lh);
    @apply font-medium;
  }

  p {
    font-size: var(--text-body2-size);
    line-height: var(--text-body2-lh);
  }

  :is(input, textarea, select, button):focus-visible {
    @apply outline-none;
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.35);
  }

  a {
    @apply inline-block transition-all duration-200 cursor-pointer;
  }

  a:hover {
    @apply underline;
  }
}

/* ===== COMPOSANTS ===== */

@layer components {
  /* ========== BOUTONS ========== */
  /* ========== Base ========== */
  .pm-btn {
    @apply inline-flex items-center justify-center font-medium cursor-pointer whitespace-nowrap;
    @apply transition-colors duration-200;
    border-radius: var(--radius-button);
  }

  /* ========== SIZES ========== */

  .pm-btn--sm-md {
    height: 2rem; /* 32px */
    padding-inline: 1rem; /* 16px */
    font-size: 14px;
    line-height: 16px;
  }

  @media (min-width: 768px) {
    .pm-btn--sm-md {
      height: 2.5rem; /* 40px */
      padding-inline: 1.25rem; /* 20px */
      font-size: 16px;
      line-height: 20px;
    }
  }

  /* MD → LG */
  .pm-btn--md-lg {
    height: 2.5rem; /* 40px */
    padding-inline: 1.25rem; /* 20px */
    font-size: 16px;
    line-height: 20px;
  }

  @media (min-width: 768px) {
    .pm-btn--md-lg {
      height: 3rem; /* 48px */
      padding-inline: 1.5rem; /* 24px */
      font-size: 18px;
      line-height: 22px;
    }
  }

  .pm-btn--lg {
    height: 3rem; /* 48px */
    padding-inline: 1.5rem; /* 24px */
    font-size: 18px;
    line-height: 22px;
  }

  .pm-btn--auth {
    height: 3.25rem;
    padding-inline: 1.5rem; /* 24px */
    font-size: 24px;
    font-weight: semibold;
    line-height: 22px;
  }

  /* ========== PRIMARY FILLED ========== */
  .pm-btn--primary {
    @apply text-white;
    background: var(--color-blue-800);
  }

  .pm-btn--primary:hover {
    background: var(--color-blue-900);
  }

  .pm-btn--primary:active {
    background: var(--color-blue-950);
    @apply scale-[0.98];
  }

  /* ========== PRIMARY OUTLINED ========== */
  .pm-btn--primary-outline {
    background: white;
    color: var(--color-blue-800);
    border: 2px solid var(--color-blue-800);
  }

  .pm-btn--primary-outline:hover {
    background: var(--color-blue-50);
  }

  .pm-btn--primary-outline:active {
    background: var(--color-blue-100);
    @apply scale-[0.98];
  }

  /* ========== SECONDARY FILLED ========== */
  .pm-btn--secondary {
    @apply text-black;
    background: var(--color-mint-300);
  }

  .pm-btn--secondary:hover {
    background: var(--color-mint-400);
  }

  .pm-btn--secondary:active {
    background: var(--color-mint-600);
    @apply scale-[0.98];
  }

  /* ========== SECONDARY OUTLINED ========== */
  .pm-btn--secondary-outline {
    background: white;
    color: var(--color-mint-500);
    border: 2px solid var(--color-mint-400);
  }

  .pm-btn--secondary-outline:hover {
    background: var(--color-mint-100);
  }

  .pm-btn--secondary-outline:active {
    background: var(--color-mint-100);
    color: var(--color-mint-600);
    @apply scale-[0.98];
  }

  /* ========== DISABLED ========== */
  .pm-btn:disabled {
    background: var(--color-neutral-grey4) !important;
    color: var(--color-neutral-grey2) !important;
    border-color: var(--color-neutral-grey4) !important;
    @apply cursor-not-allowed opacity-60;
  }

  /* ========== ICON ONLY ========== */
  .pm-btn--icon {
    @apply aspect-square p-0;
    width: 3rem;
  }

  .pm-btn--icon.pm-btn--md {
    width: 2.5rem;
  }

  .pm-btn--icon.pm-btn--sm {
    width: 2rem;
  }

  /* ========== LOADING ========== */
  .pm-btn--loading {
    @apply relative pointer-events-none;
    color: transparent !important;
  }

  .pm-btn--loading::after {
    content: '';
    @apply absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2;
    @apply w-5 h-5 rounded-full border-2 border-current border-t-transparent;
    animation: spin 0.7s linear infinite;
  }

  @keyframes spin {
    to {
      transform: rotate(360deg);
    }
  }

  /* ========== CARDS ========== */
  .card {
    @apply overflow-hidden transition-shadow;
    background: var(--bg-primary);
    border: var(--border-width) solid var(--border-color);
    border-radius: var(--radius-card);
    box-shadow: var(--shadow-sm);
    transition-duration: var(--transition-normal);
  }

  .card:hover {
    box-shadow: var(--shadow-card);
  }

  .card-header,
  .card-footer {
    padding: var(--spacing-lg);
    background: var(--bg-secondary);
    border-color: var(--border-color);
  }

  .card-header {
    border-bottom-width: var(--border-width);
  }

  /* Variante card formulaire */
  .card--form .card-body {
    padding: 2.5rem;
  }

  .card-footer {
    border-top-width: var(--border-width);
  }

  /* ========== FORMS ========== */
  .form-group {
    @apply mb-4;
  }

  .form-label {
    @apply block mb-2 font-semibold;
    font-size: var(--text-body2-size);
    line-height: var(--text-body2-lh);
  }

  .form-input,
  .form-select,
  .form-textarea {
    @apply w-full transition-all;
    font-family: var(--font-body);
    font-size: 1.125rem;
    padding: 0.875rem 1rem;
    height: 3rem;
    color: var(--fg);
    background: var(--bg);
    border: 1px solid var(--border-color);
    border-radius: var(--radius-button);
  }

  .form-input:hover:not(:disabled),
  .form-select:hover:not(:disabled),
  .form-textarea:hover:not(:disabled) {
    border-color: color-mix(in oklab, var(--fg) 25%, transparent);
  }

  .form-input:focus,
  .form-select:focus,
  .form-textarea:focus {
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(var(--color-primary-rgb), 0.1);
  }

  .form-input::placeholder {
    color: var(--color-neutral-grey1);
  }

  .form-textarea {
    @apply resize-y;
    min-height: 6rem;
  }

  .form-select {
    @apply appearance-none;
    background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236d6d6d' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e");
    background-position: right 0.75rem center;
    background-repeat: no-repeat;
    background-size: 1.25em 1.25em;
    padding-right: 2.5rem;
  }

  .form-error {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
    padding: 0.25rem 0.5rem;
    font-size: 1rem;
    line-height: 1.25rem;
    color: var(--danger);
  }

  .form-error--soft {
    background: var(--danger-light);
    border-radius: 0.375rem;
  }

  /* ========== NAVBAR ========== */
  .navbar {
    @apply flex items-center justify-between;
    height: var(--header-height);
    padding: 0 var(--spacing-xl);
    background: var(--bg-primary);
    border-bottom: var(--border-width) solid var(--border-color);
    z-index: 50;
  }

  /* ========== SIDEBAR ========== */
  .sidebar {
    @apply overflow-y-auto;
    width: var(--sidebar-width);
    height: calc(100vh - var(--header-height));
    background: var(--bg-secondary);
    border-right: var(--border-width) solid var(--border-color);
  }

  /* ========== TABLES ========== */
  .table-responsive {
    @apply overflow-x-auto;
  }

  .table {
    @apply w-full border-collapse;
  }

  .table th,
  .table td {
    @apply text-left;
    padding: var(--spacing-sm) var(--spacing-md);
    border-bottom: var(--border-width) solid var(--border-color);
  }

  .table th {
    @apply font-semibold;
    background: var(--bg-secondary);
  }

  /* ========== ALERTS ========== */
  .alert {
    @apply mb-3;
    padding: var(--spacing-md) var(--spacing-lg);
    border-radius: var(--radius-button);
    border-width: var(--border-width);
  }

  .alert-success {
    color: #065f46;
    background: var(--success-light);
    border-color: var(--success);
  }

  .alert-warning {
    color: #92400e;
    background: var(--warning-light);
    border-color: var(--warning);
  }

  .alert-danger {
    color: #991b1b;
    background: var(--danger-light);
    border-color: var(--danger);
  }

  .alert-info {
    color: #1e40af;
    background: var(--info-light);
    border-color: var(--info);
  }

  /* ========== BADGES ========== */
  .badge {
    @apply inline-flex items-center whitespace-nowrap text-xs font-medium;
    padding: var(--spacing-xs) var(--spacing-sm);
    border-radius: var(--radius-pill);
  }

  .badge-primary {
    color: color-mix(in oklab, var(--primary) 80%, black);
    background: color-mix(in oklab, var(--primary) 10%, white);
  }

  .badge-success {
    color: #065f46;
    background: var(--success-light);
  }

  .badge-warning {
    color: #92400e;
    background: var(--warning-light);
  }

  .badge-danger {
    color: #991b1b;
    background: var(--danger-light);
  }

  /* ========== AVATARS ========== */
  .pm-avatar {
    @apply relative inline-grid place-items-center overflow-hidden rounded-full;
    width: 2.75rem;
    height: 2.75rem;
    border: 2px solid color-mix(in oklab, var(--fg) 10%, transparent);
    background: color-mix(in oklab, var(--fg) 6%, transparent);
  }

  .pm-avatar--sm {
    @apply w-8 h-8;
  }

  .pm-avatar--lg {
    width: 3.5rem;
    height: 3.5rem;
  }

  .pm-avatar__status {
    @apply absolute rounded-full;
    content: '';
    right: -2px;
    bottom: -2px;
    width: 0.9rem;
    height: 0.9rem;
    border: 2px solid var(--bg);
    background: var(--success);
  }

  .pm-avatar--offline .pm-avatar__status {
    background: #9aa3b2;
  }

  /* ========== MENU / DROPDOWN ========== */
  .pm-menu {
    @apply backdrop-blur-sm;
    padding: 0.25rem 0;
    min-width: 12rem;
    border-radius: 0.75rem;
    background: color-mix(in oklab, var(--bg) 92%, transparent);
    border: 1px solid color-mix(in oklab, var(--fg) 10%, transparent);
    box-shadow: var(--shadow-card);
  }

  .pm-menu__item {
    @apply flex items-center gap-2 cursor-pointer text-sm transition-all;
    padding: 0.5rem 0.75rem;
    color: color-mix(in oklab, var(--fg) 85%, transparent);
  }

  .pm-menu__item:hover {
    background: color-mix(in oklab, var(--primary) 12%, transparent);
    color: var(--primary);
  }

  .pm-menu__divider {
    @apply my-1;
    border-top: 1px solid color-mix(in oklab, var(--fg) 10%, transparent);
  }

  /* ========== SWITCH ========== */
  .pm-switch {
    @apply relative inline-flex items-center cursor-pointer select-none rounded-full;
    @apply transition-colors;
    width: 2.5rem;
    height: 1.35rem;
    background: color-mix(in oklab, var(--fg) 20%, transparent);
  }

  .pm-switch::after {
    @apply absolute rounded-full;
    content: '';
    left: 2px;
    top: 2px;
    width: 1rem;
    height: 1rem;
    background: var(--bg);
    box-shadow: 0 1px 2px rgba(0, 0, 0, 0.15);
    transition: transform 0.2s ease;
  }

  .pm-switch[aria-checked='true'] {
    background: var(--primary);
  }

  .pm-switch[aria-checked='true']::after {
    @apply translate-x-[1.15rem];
  }
}

/* ===== ACCESSIBILITY ===== */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}

.sr-only {
  @apply absolute w-px h-px p-0 -m-px overflow-hidden whitespace-nowrap border-0;
  clip: rect(0, 0, 0, 0);
}
