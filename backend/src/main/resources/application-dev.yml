# ==============================================
# Configuration DEV
# ==============================================

spring:
  # ====== JPA / HIBERNATE avec POSTGIS ======
  jpa:
    hibernate:
      ddl-auto: validate # Hibernate modifie automatiquement la BDD
    show-sql: true # Affiche les requêtes SQL dans les logs
    properties:
      hibernate:
        format_sql: true # Formate les requêtes SQL (plus lisible)
        use_sql_comments: true # Ajoute des commentaires dans les requêtes
        database-platform: org.hibernate.spatial.dialect.postgis.PostgisDialect

  # ====== FLYWAY : SVG migrations ======
  flyway:
    enabled: true
    baseline-on-migrate: true # Si BDD existe déjà
    locations: classpath:db/migration
    validate-on-migrate: true
    clean-disabled: true
  # ====== EMAIL (pour tests locaux) ======
  #mail:
  #  host: ${MAIL_HOST:localhost}
  #  port: ${MAIL_PORT:1025} # Port de MailHog ou MailDev (serveur SMTP local)
  #  username: ${MAIL_USERNAME:dev@localhost}
  #  password: ${MAIL_PASSWORD:dev}
  #  properties:
  #    mail:
  #      smtp:
  #        auth: false  # Pas d'authentification en local
  #        starttls:
  #          enable: false

# ====== SERVEUR ======
server:
  port: ${SERVER_PORT:8081} # Port du backend

# ====== LOGGING DÉTAILLÉ ======
logging:
  level:
    root: INFO # Niveau global
    com.powerme.backend: DEBUG # Tes classes en mode DEBUG (+ de détails)
    org.springframework.web: DEBUG
    org.springframework.security: DEBUG
    org.hibernate.SQL: DEBUG # Logs SQL détaillés
    org.hibernate.type.descriptor.sql.BasicBinder: TRACE  # Paramètres SQL

# ====== MODE DEBUG ACTIVÉ ======
app:
  debug: true  # Messages d'erreur détaillés

